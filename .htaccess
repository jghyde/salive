#
# Apache/PHP/Drupal settings:
#

<Limit GET POST>
order deny,allow
deny from 210.5.214.128/29
deny from 210.89.69.160/28
deny from 210.89.71.0/26
deny from 210.89.71.64/27
deny from 210.89.71.96/29
deny from 210.89.71.112/28
deny from 210.89.71.128/27
deny from 210.89.71.168/29
deny from 210.89.71.176/28
deny from 210.89.71.192/27
deny from 210.89.71.224/29
deny from 210.89.71.232/30
deny from 210.89.69.144/29
deny from 210.89.69.128/29
deny from 210.89.69.112/28
deny from 210.5.215.80/29
deny from 210.5.215.104/29
deny from 210.5.226.0/24
deny from 210.5.235.8/29
deny from 210.5.235.32/29
deny from 210.5.235.96/29
deny from 210.5.235.112/29
deny from 210.5.236.48/29
deny from 210.89.67.184/29
deny from 210.89.67.192/26
deny from 210.89.69.32/27
deny from 210.89.71.236/31
deny from 210.89.71.238/32
deny from 210.89.73.192/27
deny from 210.89.73.224/29
deny from 210.89.73.232/30
deny from 210.89.73.236/31
deny from 210.89.73.238/32
deny from 210.89.73.240/28
deny from 210.89.74.0/25
deny from 210.89.74.128/26
deny from 210.89.74.192/27
deny from 210.89.74.224/28
deny from 210.89.74.240/29
deny from 210.89.73.176/28
deny from 210.89.73.168/29
deny from 210.89.73.128/27
deny from 210.89.71.240/28
deny from 210.89.72.0/29
deny from 210.89.72.32/28
deny from 210.89.72.56/29
deny from 210.89.72.64/29
deny from 210.89.72.80/29
deny from 210.89.72.136/29
deny from 210.89.72.152/29
deny from 210.89.72.208/29
deny from 210.89.72.240/29
deny from 210.89.73.0/25
deny from 210.89.75.40/29
deny from 202.174.157.232/29
deny from 203.88.68.216/29
deny from 203.88.68.224/27
deny from 203.88.78.80/29
deny from 203.88.78.224/28
deny from 203.88.82.240/29
deny from 203.88.88.28/30
deny from 203.88.88.32/27
deny from 203.88.88.64/30
deny from 203.88.88.136/29
deny from 203.88.92.0/24
deny from 203.174.27.0/24
deny from 203.88.68.192/29
deny from 203.88.68.188/31
deny from 203.88.68.184/30
deny from 203.88.66.64/29
deny from 203.88.66.160/29
deny from 203.88.68.8/29
deny from 203.88.68.16/28
deny from 203.88.68.32/28
deny from 203.88.68.56/29
deny from 203.88.68.64/26
deny from 203.88.68.128/29
deny from 203.88.68.144/28
deny from 203.88.68.160/28
deny from 203.88.68.176/29
deny from 203.208.205.192/26
deny from 203.215.32.0/20
deny from 206.226.106.32/29
deny from 207.210.239.112/28
deny from 208.35.53.176/28
deny from 208.115.117.144/29
deny from 208.251.176.232/29
deny from 208.251.201.56/29
deny from 209.90.176.64/29
deny from 209.236.123.172/30
deny from 209.236.123.176/30
deny from 210.5.193.24/29
deny from 210.5.193.40/29
deny from 206.226.105.24/29
deny from 206.226.94.56/29
deny from 206.226.88.32/29
deny from 204.231.159.0/27
deny from 206.217.128.112/29
deny from 206.217.132.104/29
deny from 206.217.134.48/29
deny from 206.217.135.128/29
deny from 206.226.67.144/29
deny from 206.226.76.144/29
deny from 206.226.79.16/29
deny from 206.226.81.168/29
deny from 206.226.82.224/29
deny from 206.226.87.216/29
deny from 210.5.194.32/28
deny from 210.89.81.0/28
deny from 212.21.40.112/28
deny from 212.21.40.128/27
deny from 212.21.40.160/29
deny from 212.21.43.0/25
deny from 212.21.44.80/28
deny from 212.21.52.0/28
deny from 212.21.52.32/27
deny from 212.21.52.64/27
deny from 212.21.52.96/28
deny from 212.21.52.128/27
deny from 212.21.59.0/24
deny from 212.21.40.88/29
deny from 212.21.35.48/30
deny from 212.21.35.20/30
deny from 210.89.81.96/28
deny from 210.89.81.120/29
deny from 210.89.81.128/28
deny from 210.89.81.160/29
deny from 210.89.81.176/28
deny from 210.89.81.192/28
deny from 210.89.81.224/28
deny from 210.89.87.0/24
deny from 210.89.93.16/28
deny from 210.89.93.208/29
deny from 210.89.93.224/27
deny from 213.187.224.0/22
deny from 216.176.179.144/28
deny from 217.195.146.128/28
deny from 217.195.146.144/30
deny from 217.195.146.152/29
deny from 217.195.146.160/27
deny from 217.195.146.192/28
deny from 217.195.146.208/29
deny from 217.195.146.232/29
deny from 217.195.146.240/28
deny from 217.195.147.0/28
deny from 217.195.147.41/32
deny from 217.195.147.42/31
deny from 217.195.146.112/28
deny from 217.195.146.96/29
deny from 217.195.146.64/27
deny from 217.10.167.0/24
deny from 217.195.144.24/29
deny from 217.195.144.32/30
deny from 217.195.145.0/27
deny from 217.195.145.32/28
deny from 217.195.145.56/29
deny from 217.195.145.80/28
deny from 217.195.145.96/27
deny from 217.195.145.128/25
deny from 217.195.146.8/29
deny from 217.195.146.16/29
deny from 217.195.147.44/30
deny from 210.89.75.56/29
deny from 210.89.76.128/29
deny from 210.89.76.144/28
deny from 210.89.76.160/28
deny from 210.89.76.176/29
deny from 210.89.76.208/28
deny from 210.89.76.224/29
deny from 210.89.76.240/28
deny from 210.89.77.24/29
deny from 210.89.78.0/28
deny from 210.89.78.32/28
deny from 210.89.78.48/29
deny from 210.89.76.120/29
deny from 210.89.76.96/28
deny from 210.89.76.88/29
deny from 210.89.75.64/26
deny from 210.89.75.128/27
deny from 210.89.75.160/29
deny from 210.89.75.184/29
deny from 210.89.75.192/29
deny from 210.89.75.224/28
deny from 210.89.76.0/28
deny from 210.89.76.24/29
deny from 210.89.76.40/29
deny from 210.89.76.48/29
deny from 210.89.76.64/28
deny from 210.89.78.72/29
deny from 210.89.78.96/27
deny from 210.89.79.224/27
deny from 210.89.80.8/29
deny from 210.89.80.32/28
deny from 210.89.80.48/29
deny from 210.89.80.64/29
deny from 210.89.80.80/28
deny from 210.89.80.96/29
deny from 210.89.80.112/29
deny from 210.89.80.128/27
deny from 210.89.80.160/28
deny from 210.89.80.176/29
deny from 210.89.79.208/28
deny from 210.89.79.200/29
deny from 210.89.79.176/29
deny from 210.89.78.144/28
deny from 210.89.78.160/28
deny from 210.89.78.208/28
deny from 210.89.78.248/29
deny from 210.89.79.0/28
deny from 210.89.79.32/28
deny from 210.89.79.64/29
deny from 210.89.79.80/28
deny from 210.89.79.96/27
deny from 210.89.79.144/28
deny from 210.89.79.160/28
deny from 210.89.80.192/29
deny from 202.174.157.192/27
deny from 103.23.247.0/24
deny from 109.235.205.72/29
deny from 109.235.205.112/30
deny from 109.235.205.120/29
deny from 109.235.205.136/30
deny from 109.235.205.152/30
deny from 109.235.206.0/28
deny from 109.235.206.24/29
deny from 109.235.206.32/27
deny from 111.125.152.0/21
deny from 111.223.244.0/22
deny from 113.208.72.0/23
deny from 109.235.205.64/30
deny from 109.235.205.48/28
deny from 109.235.205.40/30
deny from 103.28.132.0/22
deny from 103.30.136.0/22
deny from 103.244.144.0/22
deny from 103.247.198.0/24
deny from 103.251.176.0/22
deny from 109.235.203.0/28
deny from 109.235.205.0/29
deny from 109.235.205.8/30
deny from 109.235.205.16/30
deny from 109.235.205.24/29
deny from 109.235.205.36/30
deny from 117.55.192.0/20
deny from 117.104.224.0/21
deny from 173.253.122.48/29
deny from 175.106.32.0/19
deny from 175.176.225.192/28
deny from 175.176.225.240/28
deny from 175.176.226.64/28
deny from 175.176.228.176/28
deny from 175.176.229.112/28
deny from 175.176.230.112/28
deny from 175.176.235.0/24
deny from 175.176.236.0/24
deny from 175.176.237.56/29
deny from 173.253.122.32/29
deny from 173.253.117.136/29
deny from 128.41.128.0/17
deny from 119.59.80.0/21
deny from 121.100.48.0/21
deny from 121.127.32.0/19
deny from 122.201.36.88/29
deny from 122.201.36.96/28
deny from 122.201.38.32/28
deny from 122.201.38.224/27
deny from 122.201.39.128/28
deny from 122.201.44.48/28
deny from 124.199.112.0/20
deny from 125.213.192.0/19
deny from 175.176.237.104/29
deny from 27.116.56.0/22
deny from 65.219.15.80/29
deny from 65.223.240.16/29
deny from 65.223.246.232/29
deny from 65.241.40.176/29
deny from 65.241.40.200/29
deny from 65.242.147.16/29
deny from 66.181.39.96/29
deny from 69.43.228.224/27
deny from 69.61.8.56/29
deny from 69.61.16.216/29
deny from 69.61.33.64/29
deny from 65.219.15.72/29
deny from 65.216.143.16/28
deny from 65.213.122.40/29
deny from 46.136.7.0/24
deny from 46.136.147.0/24
deny from 58.147.128.0/19
deny from 61.5.192.0/20
deny from 63.76.180.160/29
deny from 63.87.97.88/29
deny from 63.99.56.40/29
deny from 63.250.179.160/27
deny from 63.250.182.192/29
deny from 65.197.180.160/29
deny from 65.199.111.24/29
deny from 69.61.40.128/26
deny from 69.61.43.0/27
deny from 103.5.172.0/22
deny from 103.5.196.0/23
deny from 103.7.104.0/22
deny from 103.12.96.0/22
deny from 103.13.64.0/22
deny from 103.14.24.0/24
deny from 103.15.238.0/23
deny from 103.17.60.0/22
deny from 103.17.165.0/24
deny from 103.17.166.0/23
deny from 103.18.160.0/22
deny from 96.8.113.216/29
deny from 92.39.124.0/25
deny from 91.109.216.0/21
deny from 69.61.102.224/27
deny from 69.88.2.244/30
deny from 69.88.10.160/28
deny from 78.41.227.168/29
deny from 80.247.139.0/24
deny from 81.31.199.32/30
deny from 82.205.202.0/23
deny from 82.205.204.0/22
deny from 83.229.43.184/29
deny from 84.11.33.0/24
deny from 87.249.84.0/24
deny from 103.23.36.0/22
deny from 180.94.64.0/19
deny from 193.219.243.224/29
deny from 193.219.243.240/29
deny from 202.56.176.0/20
deny from 202.86.16.0/20
deny from 202.133.9.248/29
deny from 202.133.13.8/29
deny from 202.133.13.16/28
deny from 202.133.13.40/29
deny from 202.133.13.56/29
deny from 202.174.133.8/29
deny from 202.174.133.32/28
deny from 193.219.243.208/29
deny from 193.219.243.192/28
deny from 193.219.243.176/28
deny from 180.222.136.0/21
deny from 182.50.176.0/20
deny from 192.196.232.80/28
deny from 192.210.229.176/28
deny from 193.201.151.64/26
deny from 193.219.208.192/28
deny from 193.219.243.16/28
deny from 193.219.243.48/28
deny from 193.219.243.64/27
deny from 193.219.243.112/28
deny from 193.219.243.128/27
deny from 202.174.133.144/29
deny from 202.174.134.0/29
deny from 202.174.154.184/30
deny from 202.174.154.212/30
deny from 202.174.155.32/29
deny from 202.174.155.128/29
deny from 202.174.155.144/29
deny from 202.174.155.216/29
deny from 202.174.155.240/29
deny from 202.174.156.192/28
deny from 202.174.156.208/29
deny from 202.174.156.224/29
deny from 202.174.156.248/29
deny from 202.174.154.180/30
deny from 202.174.154.160/29
deny from 202.174.154.128/29
deny from 202.174.144.0/29
deny from 202.174.144.216/29
deny from 202.174.145.128/29
deny from 202.174.147.0/24
deny from 202.174.148.32/29
deny from 202.174.148.48/29
deny from 202.174.148.128/29
deny from 202.174.153.184/29
deny from 202.174.154.0/29
deny from 202.174.154.24/29
deny from 202.174.154.96/28
deny from 202.174.157.128/26
deny from 175.176.237.112/28
deny from 175.176.238.232/30
deny from 175.176.238.236/31
deny from 175.176.238.238/32
deny from 175.176.238.240/28
deny from 175.176.239.0/25
deny from 175.176.239.128/27
deny from 175.176.239.168/29
deny from 175.176.239.176/28
deny from 175.176.239.192/26
deny from 175.176.240.0/25
deny from 175.176.240.128/28
deny from 175.176.238.224/29
deny from 175.176.238.192/27
deny from 175.176.238.176/28
deny from 175.176.237.136/29
deny from 175.176.237.144/29
deny from 175.176.237.160/27
deny from 175.176.237.192/27
deny from 175.176.237.224/29
deny from 175.176.237.232/30
deny from 175.176.237.236/31
deny from 175.176.237.240/28
deny from 175.176.238.0/25
deny from 175.176.238.128/27
deny from 175.176.238.168/29
deny from 175.176.240.144/29
deny from 175.176.240.160/27
deny from 175.176.243.224/28
deny from 175.176.243.240/29
deny from 175.176.244.80/28
deny from 175.176.244.96/27
deny from 175.176.244.128/29
deny from 175.176.244.136/30
deny from 175.176.244.140/31
deny from 175.176.244.144/28
deny from 175.176.244.160/28
deny from 175.176.244.192/28
deny from 175.176.244.224/27
deny from 175.176.243.192/27
deny from 175.176.243.128/26
deny from 175.176.243.0/25
deny from 175.176.240.192/27
deny from 175.176.240.224/29
deny from 175.176.240.240/28
deny from 175.176.241.0/28
deny from 175.176.241.32/27
deny from 175.176.241.64/26
deny from 175.176.241.128/27
deny from 175.176.241.168/29
deny from 175.176.241.176/28
deny from 175.176.241.192/26
deny from 175.176.242.0/24
deny from 175.176.245.0/24
allow from all
</Limit>

# Protect files and directories from prying eyes.
<FilesMatch "\.(engine|inc|info|install|make|module|profile|test|po|sh|.*sql|theme|tpl(\.php)?|xtmpl)(~|\.sw[op]|\.bak|\.orig|\.save)?$|^(\..*|Entries.*|Repository|Root|Tag|Template)$|^#.*#$|\.php(~|\.sw[op]|\.bak|\.orig\.save)$">
  Order allow,deny
</FilesMatch>

# Don't show directory listings for URLs which map to a directory.
Options -Indexes

# Follow symbolic links in this directory.
Options +FollowSymLinks

# Make Drupal handle any 404 errors.
ErrorDocument 404 /index.php

# Set the default handler.
DirectoryIndex index.php index.html index.htm

# Override PHP settings that cannot be changed at runtime. See
# sites/default/default.settings.php and drupal_environment_initialize() in
# includes/bootstrap.inc for settings that can be changed at runtime.

# PHP 5, Apache 1 and 2.
<IfModule mod_php5.c>
  php_flag magic_quotes_gpc                 off
  php_flag magic_quotes_sybase              off
  php_flag register_globals                 off
  php_flag session.auto_start               off
  php_value mbstring.http_input             pass
  php_value mbstring.http_output            pass
  php_flag mbstring.encoding_translation    off
</IfModule>

# Requires mod_expires to be enabled.
<IfModule mod_expires.c>
  # Enable expirations.
  ExpiresActive On

  # Cache all files for 2 weeks after access (A).
  ExpiresDefault A1209600

  <FilesMatch \.php$>
    # Do not allow PHP scripts to be cached unless they explicitly send cache
    # headers themselves. Otherwise all scripts would have to overwrite the
    # headers set by mod_expires if they want another caching behavior. This may
    # fail if an error occurs early in the bootstrap process, and it may cause
    # problems if a non-Drupal PHP file is installed in a subdirectory.
    ExpiresActive Off
  </FilesMatch>
</IfModule>

# Various rewrite rules.
<IfModule mod_rewrite.c>
  RewriteEngine on

  # Set "protossl" to "s" if we were accessed via https://.  This is used later
  # if you enable "www." stripping or enforcement, in order to ensure that
  # you don't bounce between http and https.
  RewriteRule ^ - [E=protossl]
  RewriteCond %{HTTPS} on
  RewriteRule ^ - [E=protossl:s]

  # Make sure Authorization HTTP header is available to PHP
  # even when running as CGI or FastCGI.
  RewriteRule ^ - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

  # Block access to "hidden" directories whose names begin with a period. This
  # includes directories used by version control systems such as Subversion or
  # Git to store control files. Files whose names begin with a period, as well
  # as the control files used by CVS, are protected by the FilesMatch directive
  # above.
  #
  # NOTE: This only works when mod_rewrite is loaded. Without mod_rewrite, it is
  # not possible to block access to entire directories from .htaccess, because
  # <DirectoryMatch> is not allowed here.
  #
  # If you do not have mod_rewrite installed, you should remove these
  # directories from your webroot or otherwise protect them from being
  # downloaded.
  RewriteRule "(^|/)\." - [F]

  # If your site can be accessed both with and without the 'www.' prefix, you
  # can use one of the following settings to redirect users to your preferred
  # URL, either WITH or WITHOUT the 'www.' prefix. Choose ONLY one option:
  #
  # To redirect all users to access the site WITH the 'www.' prefix,
  # (http://example.com/... will be redirected to http://www.example.com/...)
  # uncomment the following:
  # RewriteCond %{HTTP_HOST} .
  # RewriteCond %{HTTP_HOST} !^www\. [NC]
  # RewriteRule ^ http%{ENV:protossl}://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
  #
  # To redirect all users to access the site WITHOUT the 'www.' prefix,
  # (http://www.example.com/... will be redirected to http://example.com/...)
  # uncomment the following:
  RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
  RewriteRule ^ http%{ENV:protossl}://%1%{REQUEST_URI} [L,R=301]
  RewriteCond %{HTTP_HOST} ^direct\.(.+)$ [NC]
  RewriteRule ^ http%{ENV:protossl}://%1%{REQUEST_URI} [L,R=301]
  # Modify the RewriteBase if you are using Drupal in a subdirectory or in a
  # VirtualDocumentRoot and the rewrite rules are not working properly.
  # For example if your site is at http://example.com/drupal uncomment and
  # modify the following line:
  # RewriteBase /drupal
  #
  # If your site is running in a VirtualDocumentRoot at http://example.com/,
  # uncomment the following line:
  # RewriteBase /

  # Pass all requests not referring directly to files in the filesystem to
  # index.php. Clean URLs are handled in drupal_environment_initialize().
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} !=/favicon.ico
  RewriteRule ^ index.php [L]

  # Rules to correctly serve gzip compressed CSS and JS files.
  # Requires both mod_rewrite and mod_headers to be enabled.
  <IfModule mod_headers.c>
    # Serve gzip compressed CSS files if they exist and the client accepts gzip.
    RewriteCond %{HTTP:Accept-encoding} gzip
    RewriteCond %{REQUEST_FILENAME}\.gz -s
    RewriteRule ^(.*)\.css $1\.css\.gz [QSA]

    # Serve gzip compressed JS files if they exist and the client accepts gzip.
    RewriteCond %{HTTP:Accept-encoding} gzip
    RewriteCond %{REQUEST_FILENAME}\.gz -s
    RewriteRule ^(.*)\.js $1\.js\.gz [QSA]

    # Serve correct content types, and prevent mod_deflate double gzip.
    RewriteRule \.css\.gz$ - [T=text/css,E=no-gzip:1]
    RewriteRule \.js\.gz$ - [T=text/javascript,E=no-gzip:1]

    <FilesMatch "(\.js\.gz|\.css\.gz)$">
      # Serve correct encoding type.
      Header set Content-Encoding gzip
      # Force proxies to cache gzipped & non-gzipped css/js files separately.
      Header append Vary Accept-Encoding
    </FilesMatch>
  </IfModule>
</IfModule>

